<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¨ÙˆØ§Ø¨Ø© ÙŠÙˆØ³Ù V8 | Firebase Extractor</title>
    <style>
        body { background: #020605; color: #fff; font-family: sans-serif; text-align: center; padding: 20px; }
        .section { margin: 20px auto; max-width: 900px; background: #0a1110; padding: 20px; border-radius: 15px; border: 1px solid #1a2a27; }
        .btn { background: #00F5C4; color: #000; padding: 12px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; margin: 5px; }
        #results { text-align: left; background: #000; padding: 15px; border-radius: 10px; color: #00F5C4; font-family: monospace; overflow-x: auto; display: none; }
        .link-item { margin: 10px 0; border-bottom: 1px solid #1a2a27; padding-bottom: 5px; }
        .found { color: #ffeb3b; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Ø±Ø§Ø¯Ø§Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª - ÙŠÙˆØ³Ù ğŸš€</h1>
    <p>ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨: <span class="found">589718</span> | Ø§Ù„Ø³ÙŠØ±ÙØ±: <span class="found">Firebase RTDB</span></p>

    <div class="section">
        <button class="btn" onclick="startScan()">ğŸ” ÙØ­Øµ Ø³ÙŠØ±ÙØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</button>
        <button class="btn" style="background:#fff" onclick="injectIdentity()">ğŸ†” Ø²Ø±Ø¹ Ø§Ù„Ù‡ÙˆÙŠØ© (Bypass)</button>
    </div>

    <div class="section" id="results-area">
        <h3>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©:</h3>
        <div id="results"></div>
    </div>

    <script>
        // 1. Ø²Ø±Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª ÙŠÙˆØ³Ù Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„
        function injectIdentity() {
            localStorage.setItem("studentInfo", JSON.stringify({
                student_name: "ÙŠÙˆØ³Ù", 
                studentCode: "589718", 
                deviceCode: "DID-0EB45049E23E" 
            }));
            localStorage.setItem("activeCode", "589718");
            alert("âœ… ØªÙ… Ø²Ø±Ø¹ Ø§Ù„Ù‡ÙˆÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ÙØªØ­ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø¯ÙˆÙ† 404.");
        }

        // 2. ÙƒÙˆØ¯ Ø³Ø­Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
        async function startScan() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = "â³ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆØ§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø±ÙˆØ§Ø¨Ø·...";

            const firebaseUrl = "https://quest-full-default-rtdb.firebaseio.com/.json";
            
            try {
                const response = await fetch(firebaseUrl);
                const data = await response.json();
                
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¶Ø®Ù…Ø©
                const allDataString = JSON.stringify(data);
                const videoRegex = /(https?:\/\/[^\s"]+\.(m3u8|mp4|ts)|https?:\/\/player\.vimeo\.com\/video\/\d+)/g;
                const foundLinks = allDataString.match(videoRegex);

                if (foundLinks && foundLinks.length > 0) {
                    const uniqueLinks = [...new Set(foundLinks)]; // Ù…Ø³Ø­ Ø§Ù„ØªÙƒØ±Ø§Ø±
                    resultsDiv.innerHTML = `âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ (${uniqueLinks.length}) Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ:<br><br>`;
                    uniqueLinks.forEach(link => {
                        resultsDiv.innerHTML += `<div class="link-item">ğŸ”— <a href="${link}" target="_blank" style="color:#00F5C4">${link}</a></div>`;
                    });
                } else {
                    resultsDiv.innerHTML = "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„Ù†ÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ. Ø¬Ø±Ø¨ ÙØ­Øµ /subjects.json";
                }
            } catch (error) {
                resultsDiv.innerHTML = "âš ï¸ ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø³ÙŠØ±ÙØ±. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù€ Firewall Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… VPN.";
                console.error(error);
            }
        }
    </script>
</body>
</html>
